<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="900px" preserveAspectRatio="none" style="width:816px;height:900px;background:#FFFFFF;" version="1.1" viewBox="0 0 816 900" width="816px" zoomAndPan="magnify"><defs/><g><!--MD5=[a0d94b09b17b306fb81c487dc7673e5c]
class SubscriptionController--><g id="elem_SubscriptionController"><rect codeLine="1" fill="#F1F1F1" height="66.6211" id="SubscriptionController" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="236" x="444.5" y="7"/><ellipse cx="488.3" cy="23" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M491.0656,18.875 Q491.2219,18.6563 491.4094,18.5469 Q491.5969,18.4375 491.8156,18.4375 Q492.1906,18.4375 492.425,18.7031 Q492.6594,18.9531 492.6594,19.5625 L492.6594,21.0156 Q492.6594,21.625 492.425,21.8906 Q492.1906,22.1563 491.8156,22.1563 Q491.4719,22.1563 491.2688,21.9531 Q491.0656,21.7656 490.9563,21.25 Q490.9094,20.8906 490.7219,20.7031 Q490.3938,20.3281 489.7844,20.1094 Q489.175,19.8906 488.55,19.8906 Q487.7844,19.8906 487.1438,20.2188 Q486.5188,20.5469 486.0188,21.2969 Q485.5344,22.0469 485.5344,23.0781 L485.5344,24.1719 Q485.5344,25.4063 486.425,26.2344 Q487.3156,27.0469 488.9094,27.0469 Q489.8469,27.0469 490.5031,26.7969 Q490.8938,26.6406 491.3156,26.2031 Q491.5813,25.9375 491.7219,25.8594 Q491.8781,25.7813 492.0813,25.7813 Q492.4094,25.7813 492.6594,26.0469 Q492.925,26.2969 492.925,26.6406 Q492.925,26.9844 492.5813,27.3906 Q492.0813,27.9688 491.2844,28.2969 Q490.2063,28.75 488.9094,28.75 Q487.3938,28.75 486.1906,28.125 Q485.2063,27.625 484.5188,26.5625 Q483.8313,25.4844 483.8313,24.2031 L483.8313,23.0469 Q483.8313,21.7188 484.4406,20.5781 Q485.0656,19.4219 486.1594,18.8125 Q487.2531,18.1875 488.4875,18.1875 Q489.2219,18.1875 489.8625,18.3594 Q490.5188,18.5156 491.0656,18.875 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="140" x="508.7" y="28.7969">SubscriptionController</text><line style="stroke:#181818;stroke-width:0.5;" x1="445.5" x2="679.5" y1="39" y2="39"/><line style="stroke:#181818;stroke-width:0.5;" x1="445.5" x2="679.5" y1="47" y2="47"/><ellipse cx="455.5" cy="61.8105" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="210" x="464.5" y="66.1074">switchPlan(Long idPlan, Long id);</text></g><!--MD5=[0dcc03df3314187238fb9500a6ba3a42]
class SubscriptionService--><g id="elem_SubscriptionService"><rect codeLine="7" fill="#F1F1F1" height="66.6211" id="SubscriptionService" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="236" x="444.5" y="135"/><ellipse cx="495.75" cy="151" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M498.5156,146.875 Q498.6719,146.6563 498.8594,146.5469 Q499.0469,146.4375 499.2656,146.4375 Q499.6406,146.4375 499.875,146.7031 Q500.1094,146.9531 500.1094,147.5625 L500.1094,149.0156 Q500.1094,149.625 499.875,149.8906 Q499.6406,150.1563 499.2656,150.1563 Q498.9219,150.1563 498.7188,149.9531 Q498.5156,149.7656 498.4063,149.25 Q498.3594,148.8906 498.1719,148.7031 Q497.8438,148.3281 497.2344,148.1094 Q496.625,147.8906 496,147.8906 Q495.2344,147.8906 494.5938,148.2188 Q493.9688,148.5469 493.4688,149.2969 Q492.9844,150.0469 492.9844,151.0781 L492.9844,152.1719 Q492.9844,153.4063 493.875,154.2344 Q494.7656,155.0469 496.3594,155.0469 Q497.2969,155.0469 497.9531,154.7969 Q498.3438,154.6406 498.7656,154.2031 Q499.0313,153.9375 499.1719,153.8594 Q499.3281,153.7813 499.5313,153.7813 Q499.8594,153.7813 500.1094,154.0469 Q500.375,154.2969 500.375,154.6406 Q500.375,154.9844 500.0313,155.3906 Q499.5313,155.9688 498.7344,156.2969 Q497.6563,156.75 496.3594,156.75 Q494.8438,156.75 493.6406,156.125 Q492.6563,155.625 491.9688,154.5625 Q491.2813,153.4844 491.2813,152.2031 L491.2813,151.0469 Q491.2813,149.7188 491.8906,148.5781 Q492.5156,147.4219 493.6094,146.8125 Q494.7031,146.1875 495.9375,146.1875 Q496.6719,146.1875 497.3125,146.3594 Q497.9688,146.5156 498.5156,146.875 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="125" x="516.25" y="156.7969">SubscriptionService</text><line style="stroke:#181818;stroke-width:0.5;" x1="445.5" x2="679.5" y1="167" y2="167"/><line style="stroke:#181818;stroke-width:0.5;" x1="445.5" x2="679.5" y1="175" y2="175"/><ellipse cx="455.5" cy="189.8105" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="210" x="464.5" y="194.1074">switchPlan(Long idPlan, Long id);</text></g><!--MD5=[d845121cb320b282bcbc82de8d275a60]
class SubscriptionServiceImpl--><g id="elem_SubscriptionServiceImpl"><rect codeLine="10" fill="#F1F1F1" height="122.4844" id="SubscriptionServiceImpl" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="705" x="7" y="263"/><ellipse cx="280.25" cy="279" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M283.0156,274.875 Q283.1719,274.6563 283.3594,274.5469 Q283.5469,274.4375 283.7656,274.4375 Q284.1406,274.4375 284.375,274.7031 Q284.6094,274.9531 284.6094,275.5625 L284.6094,277.0156 Q284.6094,277.625 284.375,277.8906 Q284.1406,278.1563 283.7656,278.1563 Q283.4219,278.1563 283.2188,277.9531 Q283.0156,277.7656 282.9063,277.25 Q282.8594,276.8906 282.6719,276.7031 Q282.3438,276.3281 281.7344,276.1094 Q281.125,275.8906 280.5,275.8906 Q279.7344,275.8906 279.0938,276.2188 Q278.4688,276.5469 277.9688,277.2969 Q277.4844,278.0469 277.4844,279.0781 L277.4844,280.1719 Q277.4844,281.4063 278.375,282.2344 Q279.2656,283.0469 280.8594,283.0469 Q281.7969,283.0469 282.4531,282.7969 Q282.8438,282.6406 283.2656,282.2031 Q283.5313,281.9375 283.6719,281.8594 Q283.8281,281.7813 284.0313,281.7813 Q284.3594,281.7813 284.6094,282.0469 Q284.875,282.2969 284.875,282.6406 Q284.875,282.9844 284.5313,283.3906 Q284.0313,283.9688 283.2344,284.2969 Q282.1563,284.75 280.8594,284.75 Q279.3438,284.75 278.1406,284.125 Q277.1563,283.625 276.4688,282.5625 Q275.7813,281.4844 275.7813,280.2031 L275.7813,279.0469 Q275.7813,277.7188 276.3906,276.5781 Q277.0156,275.4219 278.1094,274.8125 Q279.2031,274.1875 280.4375,274.1875 Q281.1719,274.1875 281.8125,274.3594 Q282.4688,274.5156 283.0156,274.875 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="150" x="300.75" y="284.7969">SubscriptionServiceImpl</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="711" y1="295" y2="295"/><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="711" y1="303" y2="303"/><ellipse cx="18" cy="317.8105" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="210" x="27" y="322.1074">switchPlan(Long idPlan, Long id);</text><ellipse cx="18" cy="336.4316" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="632" x="27" y="340.7285">subscriptionOptional.ifPresent(subscription -&gt; subscription.setPlan(planRepository.getById(idPlan)));</text><ellipse cx="18" cy="355.0527" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="670" x="27" y="359.3496">subscriptionOptional.ifPresent(subscription -&gt; subscription.setRenewDate(LocalDate.now().plusYears(1)));</text><ellipse cx="18" cy="373.6738" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="679" x="27" y="377.9707">subscriptionOptional.ifPresent(subscription -&gt; subscription.setRenewDate(LocalDate.now().plusMonths(1)));</text></g><!--MD5=[8cb61edb30e29c1e32ddb687c0ab6f7a]
class SubscriptionRepository--><g id="elem_SubscriptionRepository"><rect codeLine="17" fill="#F1F1F1" height="116.4453" id="SubscriptionRepository" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="278" x="220.5" y="446"/><ellipse cx="282.25" cy="468.291" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M283.2031,464.9316 L283.2031,471.5879 L284.9219,471.5879 Q285.5313,471.5879 285.7969,471.8223 Q286.0625,472.0566 286.0625,472.4473 Q286.0625,472.8223 285.7969,473.0566 Q285.5313,473.291 284.9219,473.291 L279.7813,473.291 Q279.1719,473.291 278.9063,473.0566 Q278.6406,472.8223 278.6406,472.4316 Q278.6406,472.0566 278.9063,471.8223 Q279.1719,471.5879 279.7813,471.5879 L281.5,471.5879 L281.5,464.9316 L279.7813,464.9316 Q279.1719,464.9316 278.9063,464.6973 Q278.6406,464.4629 278.6406,464.0723 Q278.6406,463.6973 278.9063,463.4629 Q279.1719,463.2285 279.7813,463.2285 L284.9219,463.2285 Q285.5313,463.2285 285.7969,463.4629 Q286.0625,463.6973 286.0625,464.0723 Q286.0625,464.4629 285.7969,464.6973 Q285.5313,464.9316 284.9219,464.9316 L283.2031,464.9316 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="61" x="345.25" y="463.9492">«interface»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="146" x="302.75" y="482.0684">SubscriptionRepository</text><line style="stroke:#181818;stroke-width:0.5;" x1="221.5" x2="497.5" y1="490.582" y2="490.582"/><line style="stroke:#181818;stroke-width:0.5;" x1="221.5" x2="497.5" y1="498.582" y2="498.582"/><ellipse cx="231.5" cy="513.3926" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="203" x="240.5" y="517.6895">save(subscriptionOptional.get())</text><ellipse cx="231.5" cy="532.0137" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="189" x="240.5" y="536.3105">findSubscriptionIdByUserId(id)</text><ellipse cx="231.5" cy="550.6348" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="252" x="240.5" y="554.9316">setPlan(planRepository.getById(idPlan))</text></g><!--MD5=[545507b7baa8aade59e57dce916f0187]
class Subscription--><g id="elem_Subscription"><rect codeLine="24" fill="#F1F1F1" height="252.832" id="Subscription" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="516" x="293.5" y="641"/><ellipse cx="508.25" cy="657" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M511.0156,652.875 Q511.1719,652.6563 511.3594,652.5469 Q511.5469,652.4375 511.7656,652.4375 Q512.1406,652.4375 512.375,652.7031 Q512.6094,652.9531 512.6094,653.5625 L512.6094,655.0156 Q512.6094,655.625 512.375,655.8906 Q512.1406,656.1563 511.7656,656.1563 Q511.4219,656.1563 511.2188,655.9531 Q511.0156,655.7656 510.9063,655.25 Q510.8594,654.8906 510.6719,654.7031 Q510.3438,654.3281 509.7344,654.1094 Q509.125,653.8906 508.5,653.8906 Q507.7344,653.8906 507.0938,654.2188 Q506.4688,654.5469 505.9688,655.2969 Q505.4844,656.0469 505.4844,657.0781 L505.4844,658.1719 Q505.4844,659.4063 506.375,660.2344 Q507.2656,661.0469 508.8594,661.0469 Q509.7969,661.0469 510.4531,660.7969 Q510.8438,660.6406 511.2656,660.2031 Q511.5313,659.9375 511.6719,659.8594 Q511.8281,659.7813 512.0313,659.7813 Q512.3594,659.7813 512.6094,660.0469 Q512.875,660.2969 512.875,660.6406 Q512.875,660.9844 512.5313,661.3906 Q512.0313,661.9688 511.2344,662.2969 Q510.1563,662.75 508.8594,662.75 Q507.3438,662.75 506.1406,662.125 Q505.1563,661.625 504.4688,660.5625 Q503.7813,659.4844 503.7813,658.2031 L503.7813,657.0469 Q503.7813,655.7188 504.3906,654.5781 Q505.0156,653.4219 506.1094,652.8125 Q507.2031,652.1875 508.4375,652.1875 Q509.1719,652.1875 509.8125,652.3594 Q510.4688,652.5156 511.0156,652.875 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78" x="528.75" y="662.7969">Subscription</text><line style="stroke:#181818;stroke-width:0.5;" x1="294.5" x2="808.5" y1="673" y2="673"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="301.5" y="684.8105"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="11" x="313.5" y="692.1074">id</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="301.5" y="703.4316"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55" x="313.5" y="710.7285">subType</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="301.5" y="722.0527"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28" x="313.5" y="729.3496">date</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="301.5" y="740.6738"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="313.5" y="747.9707">subState</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="301.5" y="759.2949"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="52" x="313.5" y="766.5918">feeType</text><line style="stroke:#181818;stroke-width:0.5;" x1="294.5" x2="808.5" y1="774.1055" y2="774.1055"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="490" x="313.5" y="793.2129">Subscription(int id, string subType, date date, string subState, string feeType)</text><ellipse cx="304.5" cy="807.5371" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66" x="313.5" y="811.834">getID(): int</text><ellipse cx="304.5" cy="826.1582" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="130" x="313.5" y="830.4551">getSubType(): string</text><ellipse cx="304.5" cy="844.7793" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="96" x="313.5" y="849.0762">getDate(): date</text><ellipse cx="304.5" cy="863.4004" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="131" x="313.5" y="867.6973">getSubState(): string</text><ellipse cx="304.5" cy="882.0215" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="130" x="313.5" y="886.3184">getFeeType(): string</text></g><!--MD5=[735a3ef7641b41d5ec8e9b2441552fb7]
link SubscriptionRepository to Subscription--><g id="link_SubscriptionRepository_Subscription"><path codeLine="39" d="M401.4,562.06 C417.63,584.17 436.93,610.46 456.19,636.69 " fill="none" id="SubscriptionRepository-to-Subscription" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="459.28,640.9,457.1789,631.2779,456.3213,636.8693,450.7299,636.0118,459.28,640.9" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="43" x="434.5" y="607.0283">records</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="7" x="399.32" y="584.6064">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="20" x="433.051" y="629.7096">0..*</text></g><!--MD5=[7c0a5013189dd744519452e23d34a89f]
link SubscriptionController to SubscriptionService--><g id="link_SubscriptionController_SubscriptionService"><path codeLine="40" d="M562.5,74.28 C562.5,91.19 562.5,111.92 562.5,129.53 " fill="none" id="SubscriptionController-to-SubscriptionService" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="562.5,134.89,566.5,125.89,562.5,129.89,558.5,125.89,562.5,134.89" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[a463dccd8de9a3cde3f12b9a78431812]
link SubscriptionServiceImpl to SubscriptionRepository--><g id="link_SubscriptionServiceImpl_SubscriptionRepository"><path codeLine="41" d="M359.5,385.26 C359.5,403.15 359.5,422.77 359.5,440.77 " fill="none" id="SubscriptionServiceImpl-to-SubscriptionRepository" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="359.5,445.81,363.5,436.81,359.5,440.81,355.5,436.81,359.5,445.81" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[86081a14726a75d9e6fe321749ef4ce7]
link SubscriptionServiceImpl to Subscription--><g id="link_SubscriptionServiceImpl_Subscription"><path codeLine="42" d="M461.5,385.01 C482.57,402.09 502.33,422.54 515.5,446 C547.49,502.99 557.79,574.64 559.53,635.73 " fill="none" id="SubscriptionServiceImpl-to-Subscription" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="559.66,640.85,563.4273,631.7502,559.5315,635.8517,555.43,631.9558,559.66,640.85" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[1106b8449e6ce895e821e5b0220feefa]
link SubscriptionService to Subscription--><g id="link_SubscriptionService_Subscription"><path codeLine="43" d="M659.51,202.07 C686.99,216.29 713.7,236.05 729.5,263 C756.92,309.78 741.24,332.06 729.5,385 C709.99,472.97 667.98,564.7 629.68,636.15 " fill="none" id="SubscriptionService-to-Subscription" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="627.16,640.83,634.9511,634.8052,629.5322,636.4286,627.9088,631.0096,627.16,640.83" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[bd4fa322b08aba60ea02c44d11c186c0]
reverse link SubscriptionService to SubscriptionServiceImpl--><g id="link_SubscriptionService_SubscriptionServiceImpl"><path codeLine="44" d="M503.28,214.28 C483.18,229.48 460.38,246.72 438.96,262.92 " fill="none" id="SubscriptionService-backto-SubscriptionServiceImpl" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="499.27,208.53,519.45,202.05,507.72,219.7,499.27,208.53" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[902c8298ece5665dccfcddc9e917ca60]
@startuml
class SubscriptionController {
 +switchPlan(Long idPlan, Long id);
}



class SubscriptionService {
 +switchPlan(Long idPlan, Long id);
}
class SubscriptionServiceImpl{
+switchPlan(Long idPlan, Long id);
+subscriptionOptional.ifPresent(subscription -> subscription.setPlan(planRepository.getById(idPlan)));
+subscriptionOptional.ifPresent(subscription -> subscription.setRenewDate(LocalDate.now().plusYears(1)));
+subscriptionOptional.ifPresent(subscription -> subscription.setRenewDate(LocalDate.now().plusMonths(1)));
}

interface SubscriptionRepository <<interface>> {
 +save(subscriptionOptional.get())
 +findSubscriptionIdByUserId(id)
 +setPlan(planRepository.getById(idPlan))
}


class Subscription {
    -id
    -subType
    -date
    -subState
    -feeType
    Subscription(int id, string subType, date date, string subState, string feeType)
    +getID(): int
    +getSubType(): string
    +getDate(): date
    +getSubState(): string
    +getFeeType(): string

}

SubscriptionRepository "1" - -> "0..*" Subscription:  records
SubscriptionController ..> SubscriptionService
SubscriptionServiceImpl ..> SubscriptionRepository
SubscriptionServiceImpl ..> Subscription
SubscriptionService ..> Subscription
SubscriptionServiceImpl .up.|> SubscriptionService
@enduml

PlantUML version 1.2022.13(Sat Nov 19 13:22:17 WET 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: pt
Country: PT
--></g></svg>