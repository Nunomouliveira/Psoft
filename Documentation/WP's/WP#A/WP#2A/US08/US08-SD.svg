<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="499px" preserveAspectRatio="none" style="width:1196px;height:499px;background:#FFFFFF;" version="1.1" viewBox="0 0 1196 499" width="1196px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="313.9102" style="stroke:#181818;stroke-width:1.0;" width="10" x="60" y="93.6211"/><rect fill="#FFFFFF" height="281.6191" style="stroke:#181818;stroke-width:1.0;" width="10" x="221" y="116.9121"/><rect fill="#FFFFFF" height="219.0371" style="stroke:#181818;stroke-width:1.0;" width="10" x="441" y="148.2031"/><rect fill="#FFFFFF" height="156.4551" style="stroke:#181818;stroke-width:1.0;" width="10" x="666" y="179.4941"/><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1.0;" width="10" x="1031" y="210.7852"/><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1.0;" width="10" x="1031" y="273.3672"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="65" x2="65" y1="83.6211" y2="416.5313"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="226" x2="226" y1="83.6211" y2="416.5313"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="446" x2="446" y1="83.6211" y2="416.5313"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="671" x2="671" y1="83.6211" y2="416.5313"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1036" x2="1036" y1="83.6211" y2="416.5313"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114" x="5" y="80.1074">Marketing director</text><ellipse cx="65" cy="13.5" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M65,21.5 L65,48.5 M52,29.5 L78,29.5 M65,48.5 L52,63.5 M65,48.5 L78,63.5 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114" x="5" y="430.6387">Marketing director</text><ellipse cx="65" cy="442.6523" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M65,450.6523 L65,477.6523 M52,458.6523 L78,458.6523 M65,477.6523 L52,492.6523 M65,477.6523 L78,492.6523 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="154" x="149" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="140" x="156" y="72.1074">SubscriptionController</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="154" x="149" y="415.5313"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="140" x="156" y="437.6387">SubscriptionController</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="266" x="313" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="252" x="320" y="72.1074">subscriptionService:SubscriptionService</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="266" x="313" y="415.5313"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="252" x="320" y="437.6387">subscriptionService:SubscriptionService</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="164" x="589" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="150" x="596" y="72.1074">SubscriptionServiceImpl</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="164" x="589" y="415.5313"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="150" x="596" y="437.6387">SubscriptionServiceImpl</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="308" x="882" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="294" x="889" y="72.1074">subscriptionRepository:SubscriptionRepository</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="308" x="882" y="415.5313"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="294" x="889" y="437.6387">subscriptionRepository:SubscriptionRepository</text><rect fill="#FFFFFF" height="313.9102" style="stroke:#181818;stroke-width:1.0;" width="10" x="60" y="93.6211"/><rect fill="#FFFFFF" height="281.6191" style="stroke:#181818;stroke-width:1.0;" width="10" x="221" y="116.9121"/><rect fill="#FFFFFF" height="219.0371" style="stroke:#181818;stroke-width:1.0;" width="10" x="441" y="148.2031"/><rect fill="#FFFFFF" height="156.4551" style="stroke:#181818;stroke-width:1.0;" width="10" x="666" y="179.4941"/><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1.0;" width="10" x="1031" y="210.7852"/><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1.0;" width="10" x="1031" y="273.3672"/><polygon fill="#181818" points="209,112.9121,219,116.9121,209,120.9121,213,116.9121" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="70" x2="215" y1="116.9121" y2="116.9121"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="77" y="111.6494">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="88" y="111.6494">PUT(/api/sub/cancel)</text><polygon fill="#181818" points="429,144.2031,439,148.2031,429,152.2031,433,148.2031" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="231" x2="435" y1="148.2031" y2="148.2031"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="238" y="142.9404">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="249" y="142.9404">updateState(Long id)</text><polygon fill="#181818" points="654,175.4941,664,179.4941,654,183.4941,658,179.4941" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="451" x2="660" y1="179.4941" y2="179.4941"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="458" y="174.2314">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="469" y="174.2314">updateState(Long id)</text><polygon fill="#181818" points="1019,206.7852,1029,210.7852,1019,214.7852,1023,210.7852" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="676" x2="1025" y1="210.7852" y2="210.7852"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="683" y="205.5225">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="80" x="694" y="205.5225">getSubState()</text><polygon fill="#181818" points="687,238.0762,677,242.0762,687,246.0762,683,242.0762" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="681" x2="1035" y1="242.0762" y2="242.0762"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="693" y="236.8135">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="14" x="704" y="236.8135">ok</text><polygon fill="#181818" points="1019,269.3672,1029,273.3672,1019,277.3672,1023,273.3672" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="676" x2="1025" y1="273.3672" y2="273.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="683" y="268.1045">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="325" x="694" y="268.1045">subscription.setSubState(SubscriptionStatus.Cancelled)</text><polygon fill="#181818" points="687,300.6582,677,304.6582,687,308.6582,683,304.6582" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="681" x2="1035" y1="304.6582" y2="304.6582"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="693" y="299.3955">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="57" x="704" y="299.3955">Cancelled</text><polygon fill="#181818" points="462,331.9492,452,335.9492,462,339.9492,458,335.9492" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="456" x2="670" y1="335.9492" y2="335.9492"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="468" y="330.6865">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="14" x="479" y="330.6865">ok</text><polygon fill="#181818" points="242,363.2402,232,367.2402,242,371.2402,238,367.2402" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="236" x2="445" y1="367.2402" y2="367.2402"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="248" y="361.9775">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="14" x="259" y="361.9775">ok</text><polygon fill="#181818" points="81,394.5313,71,398.5313,81,402.5313,77,398.5313" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="75" x2="225" y1="398.5313" y2="398.5313"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="87" y="393.2686">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="98" x="105" y="393.2686">204 : No Content</text><!--MD5=[975d9cf9426aecaa0970f68ec3656e71]
@startuml
'https://plantuml.com/sequence-diagram

autoactivate on
autonumber

actor "Marketing director" as User
participant "SubscriptionController" as Ctrl
participant "subscriptionService:SubscriptionService" as Service
participant "SubscriptionServiceImpl" as Impl
participant "subscriptionRepository:SubscriptionRepository" as Repo

activate User

User -> Ctrl: PUT(/api/sub/cancel)
Ctrl -> Service: updateState(Long id)
Service -> Impl: updateState(Long id)
Impl -> Repo: getSubState()
Repo - -> Impl: ok
Impl -> Repo: subscription.setSubState(SubscriptionStatus.Cancelled)
Repo - -> Impl: Cancelled

Impl - -> Service: ok
Service - -> Ctrl: ok
Ctrl - -> User: 204 : No Content

@enduml

@startuml

autoactivate on
autonumber

actor "Marketing director" as User
participant "SubscriptionController" as Ctrl
participant "subscriptionService:SubscriptionService" as Service
participant "SubscriptionServiceImpl" as Impl
participant "subscriptionRepository:SubscriptionRepository" as Repo

activate User

User -> Ctrl: PUT(/api/sub/cancel)
Ctrl -> Service: updateState(Long id)
Service -> Impl: updateState(Long id)
Impl -> Repo: getSubState()
Repo - -> Impl: ok
Impl -> Repo: subscription.setSubState(SubscriptionStatus.Cancelled)
Repo - -> Impl: Cancelled

Impl - -> Service: ok
Service - -> Ctrl: ok
Ctrl - -> User: 204 : No Content

@enduml

PlantUML version 1.2022.13(Sat Nov 19 13:22:17 WET 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: pt
Country: PT
--></g></svg>